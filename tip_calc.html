<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Tip Calculator — Per Person</title>
  <style>
    :root{
      --bg:#0f172a; /* slate-900 */
      --panel:#111827; /* gray-900 */
      --muted:#94a3b8; /* slate-400 */
      --text:#e5e7eb; /* gray-200 */
      --accent:#22d3ee; /* cyan-400 */
      --accent-2:#38bdf8; /* sky-400 */
      --danger:#ef4444;
      --ring: rgba(34,211,238,.35);
      --radius: 18px;
    }
    *{box-sizing:border-box}
    body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial,sans-serif;margin:0;background:radial-gradient(1200px 800px at 80% -20%, rgba(56,189,248,.12), transparent 70%),
      radial-gradient(1000px 900px at -10% 120%, rgba(34,211,238,.12), transparent 60%), var(--bg);color:var(--text);min-height:100vh;}
    .wrap{max-width:980px;margin:clamp(16px,4vw,48px) auto;padding:clamp(16px,4vw,32px);}
    h1{font-size:clamp(24px,3.5vw,36px);margin:.2rem 0 1rem;letter-spacing:.3px}
    .app{display:grid;grid-template-columns: 1fr; gap:18px}
    @media (min-width:860px){.app{grid-template-columns: 1.1fr .9fr}}

    .card{background: linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,.02)); border:1px solid rgba(148,163,184,.12); border-radius:var(--radius); padding:22px; box-shadow: 0 10px 30px rgba(0,0,0,.25)}

    label{display:block;font-size:13px;color:var(--muted);margin:8px 0 6px}
    .field{display:flex;align-items:center;background:#0b1220;border:1px solid rgba(148,163,184,.18);border-radius:12px;padding:10px 12px;gap:10px}
    .field:focus-within{outline:2px solid var(--ring);border-color:transparent}
    .field input{flex:1;background:transparent;border:0;color:var(--text);font-size:18px;outline:none}
    .field input[type="number"]::-webkit-outer-spin-button,
    .field input[type="number"]::-webkit-inner-spin-button{appearance:none;margin:0}
    .prefix{font-size:14px;color:var(--muted)}

    .grid{display:grid;grid-template-columns: repeat(2, 1fr); gap:10px}
    @media (min-width:560px){.grid{grid-template-columns: repeat(4, 1fr)}}

    .tip-btn{padding:12px 10px;border-radius:12px;border:1px solid rgba(148,163,184,.18);background:#0b1220;color:var(--text);cursor:pointer;font-weight:600;transition: transform .05s ease, border-color .2s ease, background .2s ease}
    .tip-btn:hover{border-color:rgba(56,189,248,.5)}
    .tip-btn.active{background:linear-gradient(180deg, rgba(34,211,238,.2), rgba(56,189,248,.2)); border-color:transparent}

    .row{display:flex;align-items:center;justify-content:space-between;margin:12px 0}
    .kpi{display:flex;flex-direction:column}
    .kpi small{color:var(--muted);font-size:12px}
    .kpi strong{font-size:22px;letter-spacing:.3px}

    .muted{color:var(--muted)}
    .controls{display:flex;gap:10px;flex-wrap:wrap;margin-top:12px}
    .pill{padding:10px 14px;border-radius:999px;border:1px solid rgba(148,163,184,.18);background:#0b1220;color:var(--text);font-size:14px}
    .btn{cursor:pointer}
    .btn.primary{background: linear-gradient(180deg, var(--accent), var(--accent-2)); color:#0b1220; border:none}
    .btn.ghost{background:#0b1220}

    .error{color:var(--danger);font-size:12px;min-height:16px}
    .foot{margin-top:6px;font-size:12px;color:var(--muted)}
  </style>
</head>
<body>
  <div class="wrap">
    <h1>Tip Calculator</h1>
    <div class="app">
      <!-- INPUTS -->
      <section class="card" aria-labelledby="inputs-heading">
        <h2 id="inputs-heading" class="muted" style="margin:0 0 8px;font-size:16px">Enter details</h2>

        <label for="bill">Bill amount</label>
        <div class="field">
          <span class="prefix" id="currency-prefix">₦</span>
          <input id="bill" type="number" inputmode="decimal" min="0" step="0.01" placeholder="0.00" aria-describedby="bill-err" />
        </div>
        <div id="bill-err" class="error" role="alert" aria-live="polite"></div>

        <label>Choose tip %</label>
        <div class="grid" role="group" aria-label="Tip percentage">
          <button class="tip-btn" data-tip="5">5%</button>
          <button class="tip-btn" data-tip="10">10%</button>
          <button class="tip-btn" data-tip="12.5">12.5%</button>
          <button class="tip-btn" data-tip="15">15%</button>
          <button class="tip-btn" data-tip="18">18%</button>
          <button class="tip-btn" data-tip="20">20%</button>
          <button class="tip-btn" data-tip="25">25%</button>
          <button class="tip-btn" data-tip="0">No tip</button>
        </div>

        <label for="custom">Or custom tip %</label>
        <div class="field">
          <input id="custom" type="number" inputmode="decimal" min="0" step="0.1" placeholder="e.g. 17.5" aria-describedby="custom-err" />
          <span class="prefix">%</span>
        </div>
        <div id="custom-err" class="error" role="alert" aria-live="polite"></div>

        <label for="people">Number of persons</label>
        <div class="field">
          <input id="people" type="number" inputmode="numeric" min="1" step="1" value="1" aria-describedby="people-err" />
          <span class="prefix">people</span>
        </div>
        <div id="people-err" class="error" role="alert" aria-live="polite"></div>

        <div class="controls">
          <select id="currency" class="pill" aria-label="Currency">
            <option value="NGN" selected>NGN (₦)</option>
            <option value="USD">USD ($)</option>
            <option value="EUR">EUR (€)</option>
            <option value="GBP">GBP (£)</option>
          </select>
          <button id="reset" class="pill btn ghost" type="button">Reset</button>
        </div>
        <p class="foot">Tip % buttons and custom value are mutually exclusive. Changing custom % clears the selected button.</p>
      </section>

      <!-- OUTPUTS -->
      <section class="card" aria-labelledby="outputs-heading">
        <h2 id="outputs-heading" class="muted" style="margin:0 0 8px;font-size:16px">Results</h2>
        <div class="row">
          <div class="kpi">
            <small>Bill amount</small>
            <strong id="out-bill">—</strong>
          </div>
        </div>
        <div class="row">
          <div class="kpi">
            <small>Tip amount (whole bill)</small>
            <strong id="out-tip-total">—</strong>
          </div>
        </div>
        <div class="row">
          <div class="kpi">
            <small>Total tip per person</small>
            <strong id="out-tip-per">—</strong>
          </div>
        </div>
        <div class="row">
          <div class="kpi">
            <small>Total per person (bill + tip)</small>
            <strong id="out-total-per">—</strong>
          </div>
        </div>
      </section>
    </div>
  </div>

  <script>
    // --- State ---
    const els = {
      bill: document.getElementById('bill'),
      custom: document.getElementById('custom'),
      people: document.getElementById('people'),
      buttons: Array.from(document.querySelectorAll('.tip-btn')),
      currencySel: document.getElementById('currency'),
      reset: document.getElementById('reset'),
      outBill: document.getElementById('out-bill'),
      outTipTotal: document.getElementById('out-tip-total'),
      outTipPer: document.getElementById('out-tip-per'),
      outTotalPer: document.getElementById('out-total-per'),
      billErr: document.getElementById('bill-err'),
      customErr: document.getElementById('custom-err'),
      peopleErr: document.getElementById('people-err'),
      currencyPrefix: document.getElementById('currency-prefix'),
    };

    let selectedTip = null; // % number or null when using custom

    const currencySymbols = { NGN: '₦', USD: '$', EUR: '€', GBP: '£' };

    function formatter(code){
      try { return new Intl.NumberFormat(code === 'NGN' ? 'en-NG' : undefined, { style:'currency', currency: code }); }
      catch(e){ return new Intl.NumberFormat(undefined, { style:'currency', currency: 'USD' }); }
    }

    function setActiveButton(btn){
      els.buttons.forEach(b => b.classList.toggle('active', b === btn));
    }

    function clearActiveButtons(){
      els.buttons.forEach(b => b.classList.remove('active'));
    }

    function parseNum(input){
      const v = parseFloat(input.value);
      return Number.isFinite(v) ? v : NaN;
    }

    function validate(){
      let ok = true;
      const billVal = parseNum(els.bill);
      if (!(billVal >= 0)) { els.billErr.textContent = 'Enter a valid bill amount (≥ 0).'; ok = false; } else { els.billErr.textContent = ''; }

      const customVal = parseNum(els.custom);
      if (els.custom.value && !(customVal >= 0)) { els.customErr.textContent = 'Custom % must be ≥ 0.'; ok = false; } else { els.customErr.textContent = ''; }

      const peopleVal = parseInt(els.people.value, 10);
      if (!(peopleVal >= 1)) { els.peopleErr.textContent = 'Persons must be at least 1.'; ok = false; } else { els.peopleErr.textContent = ''; }
      return ok;
    }

    function currentTipRate(){
      if (els.custom.value !== '') {
        const c = parseFloat(els.custom.value);
        return Number.isFinite(c) ? c / 100 : 0;
      }
      if (selectedTip != null) return selectedTip / 100;
      return 0;
    }

    function recalc(){
      if (!validate()) return;
      const bill = parseNum(els.bill) || 0;
      const people = Math.max(1, parseInt(els.people.value, 10) || 1);
      const rate = currentTipRate();
      const tipTotal = bill * rate;
      const tipPer = tipTotal / people;
      const totalPer = (bill + tipTotal) / people;
      const f = formatter(els.currencySel.value);

      els.outBill.textContent = bill ? f.format(bill) : '—';
      els.outTipTotal.textContent = f.format(tipTotal);
      els.outTipPer.textContent = f.format(tipPer);
      els.outTotalPer.textContent = f.format(totalPer);
    }

    // --- Events ---
    els.buttons.forEach(btn => {
      btn.addEventListener('click', () => {
        selectedTip = parseFloat(btn.dataset.tip);
        setActiveButton(btn);
        els.custom.value = '';
        recalc();
      });
    });

    els.custom.addEventListener('input', () => {
      clearActiveButtons();
      selectedTip = null;
      recalc();
    });

    ['input','change'].forEach(evt => {
      els.bill.addEventListener(evt, recalc);
      els.people.addEventListener(evt, recalc);
      els.currencySel.addEventListener(evt, () => {
        document.getElementById('currency-prefix').textContent = currencySymbols[els.currencySel.value] || '¤';
        recalc();
      });
    });

    els.reset.addEventListener('click', () => {
      els.bill.value = '';
      els.custom.value = '';
      els.people.value = '1';
      clearActiveButtons();
      selectedTip = null;
      recalc();
    });

    // Initial render
    recalc();
  </script>
</body>
</html>
